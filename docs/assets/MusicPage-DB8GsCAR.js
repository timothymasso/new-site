import{j as a,v as fe,r as pe,C as X}from"./three-vendor-19bERZqO.js";import{R as Q,r as i}from"./react-vendor-Fx7eYSTI.js";import{N as ge,F as we,S as ve}from"./main-DYXr1hPF.js";import{u as oe,m as te,b as _,c as ee}from"./motion-vendor-DdkHDI88.js";var ue={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ie=Q.createContext&&Q.createContext(ue),xe=["attr","size","title"];function ye(t,e){if(t==null)return{};var s=be(t,e),o,f;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(t);for(f=0;f<b.length;f++)o=b[f],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(s[o]=t[o])}return s}function be(t,e){if(t==null)return{};var s={};for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;s[o]=t[o]}return s}function re(){return re=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},re.apply(this,arguments)}function ce(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(f){return Object.getOwnPropertyDescriptor(t,f).enumerable})),s.push.apply(s,o)}return s}function ae(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ce(Object(s),!0).forEach(function(o){Me(t,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ce(Object(s)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(s,o))})}return t}function Me(t,e,s){return e=je(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function je(t){var e=Ce(t,"string");return typeof e=="symbol"?e:e+""}function Ce(t,e){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var o=s.call(t,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function he(t){return t&&t.map((e,s)=>Q.createElement(e.tag,ae({key:s},e.attr),he(e.child)))}function me(t){return e=>Q.createElement(Re,re({attr:ae({},t.attr)},e),he(t.child))}function Re(t){var e=s=>{var{attr:o,size:f,title:b}=t,A=ye(t,xe),v=f||s.size||"1em",x;return s.className&&(x=s.className),t.className&&(x=(x?x+" ":"")+t.className),Q.createElement("svg",re({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,o,A,{className:x,style:ae(ae({color:t.color||s.color},s.style),t.style),height:v,width:v,xmlns:"http://www.w3.org/2000/svg"}),b&&Q.createElement("title",null,b),t.children)};return ie!==void 0?Q.createElement(ie.Consumer,null,s=>e(s)):e(ue)}function Te(t){return me({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.88889 16.0001H5C4.44772 16.0001 4 15.5524 4 15.0001V9.00007C4 8.44778 4.44772 8.00007 5 8.00007H8.88889L14.1834 3.66821C14.3971 3.49335 14.7121 3.52485 14.887 3.73857C14.9601 3.8279 15 3.93977 15 4.05519V19.9449C15 20.2211 14.7761 20.4449 14.5 20.4449C14.3846 20.4449 14.2727 20.405 14.1834 20.3319L8.88889 16.0001ZM18.8631 16.5911L17.4411 15.1691C18.3892 14.4376 19 13.2902 19 12.0001C19 10.5697 18.2493 9.31476 17.1203 8.60766L18.5589 7.16906C20.0396 8.26166 21 10.0187 21 12.0001C21 13.8422 20.1698 15.4905 18.8631 16.5911Z"},child:[]}]})(t)}function Se(t){return me({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}const le=50;function Ae({defaultValue:t=50,startingValue:e=0,maxValue:s=100,className:o="",isStepped:f=!1,stepSize:b=1,leftIcon:A=a.jsx(Te,{className:"icon"}),rightIcon:v=a.jsx(Se,{className:"icon"}),onChange:x}){return a.jsx("div",{className:`slider-container ${o}`,children:a.jsx(ke,{defaultValue:t,startingValue:e,maxValue:s,isStepped:f,stepSize:b,leftIcon:A,rightIcon:v,onChange:x})})}function ke({defaultValue:t,startingValue:e,maxValue:s,isStepped:o,stepSize:f,leftIcon:b,rightIcon:A,onChange:v}){const[x,V]=i.useState(t),y=i.useRef(null),[F,H]=i.useState("middle"),G=oe(0),T=oe(0),P=oe(1);i.useEffect(()=>{V(t)},[t]),i.useEffect(()=>{v&&v(x)},[x,v]);const I=i.useCallback(M=>{if(y.current){const{left:B,right:q}=y.current.getBoundingClientRect();let O;M<B?(H("left"),O=B-M):M>q?(H("right"),O=M-q):(H("middle"),O=0),T.jump(Ee(O,le))}},[T]),U=M=>{if(M.buttons>0&&y.current){const{left:B,width:q}=y.current.getBoundingClientRect();let O=e+(M.clientX-B)/q*(s-e);o&&(O=Math.round(O/f)*f),O=Math.min(Math.max(O,e),s),V(O),G.jump(M.clientX),I(M.clientX)}},W=M=>{U(M),M.currentTarget.setPointerCapture(M.pointerId)},K=()=>{ee(T,0,{type:"spring",bounce:.5})},J=()=>{const M=s-e;return M===0?0:(x-e)/M*100};return a.jsxs(a.Fragment,{children:[a.jsxs(te.div,{onHoverStart:()=>ee(P,1.2),onHoverEnd:()=>ee(P,1),onTouchStart:()=>ee(P,1.2),onTouchEnd:()=>ee(P,1),style:{scale:P,opacity:_(P,[1,1.2],[.7,1])},className:"slider-wrapper",children:[a.jsx(te.div,{animate:{scale:F==="left"?[1,1.4,1]:1,transition:{duration:.25}},style:{x:_(()=>F==="left"?-T.get()/P.get():0)},children:b}),a.jsx("div",{ref:y,className:"slider-root",onPointerMove:U,onPointerDown:W,onPointerUp:K,children:a.jsx(te.div,{style:{scaleX:_(()=>{if(y.current){const{width:M}=y.current.getBoundingClientRect();return 1+T.get()/M}}),scaleY:_(T,[0,le],[1,.8]),transformOrigin:_(()=>{if(y.current){const{left:M,width:B}=y.current.getBoundingClientRect();return G.get()<M+B/2?"right":"left"}}),height:_(P,[1,1.2],[6,12]),marginTop:_(P,[1,1.2],[0,-3]),marginBottom:_(P,[1,1.2],[0,-3])},className:"slider-track-wrapper",children:a.jsx("div",{className:"slider-track",children:a.jsx("div",{className:"slider-range",style:{width:`${J()}%`}})})})}),a.jsx(te.div,{animate:{scale:F==="right"?[1,1.4,1]:1,transition:{duration:.25}},style:{x:_(()=>F==="right"?T.get()/P.get():0)},children:A})]}),a.jsx("p",{className:"value-indicator",children:Math.round(x)})]})}function Ee(t,e){const s=t/e;return 2*(1/(1+Math.exp(-s))-.5)*e}const Y={kick:{name:"Kick",color:"rgba(100, 150, 255, 1)",glowColor:"rgba(100, 150, 255, 0.6)"},snare:{name:"Snare",color:"rgba(255, 120, 120, 1)",glowColor:"rgba(255, 120, 120, 0.6)"},hihat:{name:"Hi-Hat",color:"rgba(120, 255, 150, 1)",glowColor:"rgba(120, 255, 150, 0.6)"}},Z=16,Ne=120;function Pe({audioContext:t,volume:e=.5}){const[s,o]=i.useState({kick:new Array(Z).fill(!1),snare:new Array(Z).fill(!1),hihat:new Array(Z).fill(!1)}),[f,b]=i.useState(!1),[A,v]=i.useState(0),[x,V]=i.useState(!1),[y,F]=i.useState(null),[H,G]=i.useState(null);i.useRef(null);const T=i.useRef(null),P=i.useRef(null),I=i.useRef(null);i.useEffect(()=>{if(!t&&!P.current)try{P.current=new(window.AudioContext||window.webkitAudioContext)}catch(m){console.error("Error initializing audio context:",m)}},[t]);const U=()=>t||P.current,W=i.useCallback(m=>{const n=U();if(!n)return;const r=n.currentTime;switch(m){case"kick":const u=n.createOscillator(),d=n.createOscillator(),j=n.createGain(),l=n.createBiquadFilter();u.type="sine",u.frequency.setValueAtTime(80,r),u.frequency.exponentialRampToValueAtTime(40,r+.05),d.type="sine",d.frequency.setValueAtTime(60,r),d.frequency.exponentialRampToValueAtTime(30,r+.08),l.type="lowpass",l.frequency.setValueAtTime(200,r),l.Q.setValueAtTime(1,r),j.gain.setValueAtTime(e*.9,r),j.gain.exponentialRampToValueAtTime(.01,r+.4),u.connect(l),d.connect(l),l.connect(j),j.connect(n.destination),u.start(r),u.stop(r+.4),d.start(r),d.stop(r+.4);break;case"snare":const c=n.sampleRate*.1,g=n.createBuffer(1,c,n.sampleRate),w=g.getChannelData(0);for(let N=0;N<c;N++)w[N]=Math.random()*2-1;const h=n.createBufferSource();h.buffer=g;const R=n.createOscillator();R.type="triangle",R.frequency.setValueAtTime(180,r);const p=n.createBiquadFilter();p.type="bandpass",p.frequency.setValueAtTime(2e3,r),p.Q.setValueAtTime(.5,r);const C=n.createGain();C.gain.setValueAtTime(e*.7,r),C.gain.exponentialRampToValueAtTime(.01,r+.15);const E=n.createGain();E.gain.setValueAtTime(e*.3,r),E.gain.exponentialRampToValueAtTime(.01,r+.08),h.connect(p),p.connect(C),R.connect(E),C.connect(n.destination),E.connect(n.destination),h.start(r),h.stop(r+.15),R.start(r),R.stop(r+.08);break;case"hihat":const D=n.sampleRate*.05,L=n.createBuffer(1,D,n.sampleRate),$=L.getChannelData(0);for(let N=0;N<D;N++)$[N]=(Math.random()*2-1)*.5;const k=n.createBufferSource();k.buffer=L;const z=n.createBiquadFilter();z.type="highpass",z.frequency.setValueAtTime(8e3,r),z.Q.setValueAtTime(1,r);const S=n.createGain();S.gain.setValueAtTime(e*.5,r),S.gain.exponentialRampToValueAtTime(.01,r+.08),k.connect(z),z.connect(S),S.connect(n.destination),k.start(r),k.stop(r+.08);break}},[e]),K=(m,n)=>{o(r=>({...r,[m]:r[m].map((u,d)=>d===n?!u:u)}))},J=(m,n,r)=>{r.preventDefault(),V(!0),F({drumType:m,stepIndex:n}),G({drumType:m,stepIndex:n}),K(m,n)},M=(m,n)=>{x&&y&&(G({drumType:m,stepIndex:n}),o(r=>{const u={...r},d=Math.min(y.stepIndex,n),j=Math.max(y.stepIndex,n),l=!r[m][y.stepIndex];return u[m]=r[m].map((c,g)=>g>=d&&g<=j?l:c),u}))},B=()=>{V(!1),F(null),G(null)};i.useEffect(()=>{const m=()=>{V(!1),F(null),G(null)};if(x)return window.addEventListener("mouseup",m),()=>{window.removeEventListener("mouseup",m)}},[x]);const q=()=>{o({kick:new Array(Z).fill(!1),snare:new Array(Z).fill(!1),hihat:new Array(Z).fill(!1)})},O=i.useCallback(()=>{if(!t||f)return;b(!0),v(0);const m=60/Ne/4*1e3;T.current=setInterval(()=>{v(n=>{const r=(n+1)%Z;return Object.keys(s).forEach(u=>{s[u][n]&&W(u)}),r})},m)},[s,W,f]),se=()=>{b(!1),v(0),T.current&&(clearInterval(T.current),T.current=null)};return i.useEffect(()=>()=>{T.current&&clearInterval(T.current)},[]),i.useEffect(()=>{if(!I.current)return;const m=()=>{var w,h,R;const r=I.current,u=r.closest(".drum-grid");if(!r||!u)return;const d=r.querySelectorAll(".drum-step");if(d.length<16)return;const j=(w=d[3])==null?void 0:w.getBoundingClientRect(),l=(h=d[7])==null?void 0:h.getBoundingClientRect(),c=(R=d[11])==null?void 0:R.getBoundingClientRect(),g=u.getBoundingClientRect();if(r.getBoundingClientRect(),j&&l&&c){const p=u.querySelectorAll(".drum-bar-marker");p.length>=3&&(p[0].style.left=`${j.right-g.left}px`,p[1].style.left=`${l.right-g.left}px`,p[2].style.left=`${c.right-g.left}px`)}},n=setTimeout(m,0);return window.addEventListener("resize",m),()=>{clearTimeout(n),window.removeEventListener("resize",m)}},[s]),a.jsxs("div",{className:"drum-pattern-maker",children:[a.jsxs("div",{className:"drum-header",children:[a.jsx("h3",{className:"drum-title",children:"Drum Pattern"}),a.jsxs("div",{className:"drum-controls",children:[a.jsx("button",{onClick:f?se:O,className:"drum-play-button",children:f?"⏸ Stop":"▶ Play"}),a.jsx("button",{onClick:q,className:"drum-clear-button",children:"Clear"})]})]}),a.jsxs("div",{className:"drum-grid",children:[[4,8,12].map(m=>a.jsx("div",{className:"drum-bar-marker","data-position":m},`bar-${m}`)),Object.keys(Y).map((m,n)=>a.jsxs("div",{className:"drum-row",children:[a.jsx("div",{className:"drum-label",style:{color:Y[m].color},children:Y[m].name}),a.jsx("div",{className:"drum-steps",ref:n===0?I:null,children:s[m].map((r,u)=>a.jsx(te.button,{className:`drum-step ${r?"active":""} ${f&&A===u?"playing":""}`,style:{backgroundColor:r?Y[m].color:"rgba(255, 255, 255, 0.05)",borderColor:r?Y[m].color:Y[m].glowColor,boxShadow:r?`0 0 12px ${Y[m].glowColor}, inset 0 0 8px rgba(255, 255, 255, 0.2)`:"none"},onMouseDown:d=>J(m,u,d),onMouseEnter:()=>M(m,u),onMouseUp:B,whileHover:{scale:x?1:1.1},whileTap:{scale:.95},onHoverStart:()=>{!r&&!x&&W(m)}},u))})]},m))]})]})}function Oe({frequencies:t}){const e=i.useRef(),s=i.useRef(0),o=i.useMemo(()=>{const b=[];for(let A=0;A<32;A++){const v=A/32*Math.PI*2;b.push({angle:v,radius:1.2,baseHeight:.1})}return b},[]);return pe((f,b)=>{s.current+=b,e.current&&(e.current.rotation.y+=b*.15)}),a.jsxs("group",{ref:e,children:[a.jsxs("group",{children:[a.jsxs("mesh",{position:[0,0,0],children:[a.jsx("sphereGeometry",{args:[.2,8,8]}),a.jsx("meshStandardMaterial",{color:new X(.2,.3,1),emissive:new X(.1,.15,.5),emissiveIntensity:.5})]}),o.map((f,b)=>{const A=Math.floor(b/o.length*t.length),v=t[A]/255||0,x=f.baseHeight+v*1.5,V=Math.cos(f.angle)*f.radius,y=Math.sin(f.angle)*f.radius;return a.jsxs("mesh",{position:[V,x/2,y],rotation:[0,f.angle,0],children:[a.jsx("boxGeometry",{args:[.05,x,.05]}),a.jsx("meshStandardMaterial",{color:new X(.2+v*.1,.3+v*.1,1),emissive:new X(.1+v*.05,.15+v*.05,.5+v*.2)})]},b)})]}),a.jsxs("group",{scale:[1,-1,1],children:[a.jsxs("mesh",{position:[0,0,0],children:[a.jsx("sphereGeometry",{args:[.2,8,8]}),a.jsx("meshStandardMaterial",{color:new X(.2,.3,1),emissive:new X(.1,.15,.5),emissiveIntensity:.5})]}),o.map((f,b)=>{const A=Math.floor(b/o.length*t.length),v=t[A]/255||0,x=f.baseHeight+v*1.5,V=Math.cos(f.angle)*f.radius,y=Math.sin(f.angle)*f.radius;return a.jsxs("mesh",{position:[V,x/2,y],rotation:[0,f.angle,0],children:[a.jsx("boxGeometry",{args:[.05,x,.05]}),a.jsx("meshStandardMaterial",{color:new X(.2+v*.1,.3+v*.1,1),emissive:new X(.1+v*.05,.15+v*.05,.5+v*.2)})]},`mirror-${b}`)})]})]})}function Ve({containerRef:t}){const e=i.useRef(null),s=i.useRef(null),o=i.useRef({}),[f,b]=i.useState(!1),[A,v]=i.useState({x:0,y:0}),[x,V]=i.useState(!1),[y,F]=i.useState(new Uint8Array(32)),[H,G]=i.useState(new Uint8Array(32)),[T,P]=i.useState(.5),I=i.useRef(null),U=i.useRef(null),W=i.useRef(null),K=i.useRef(0),J=16;i.useEffect(()=>{let n=null;const r=()=>{const l=I.current;if(!l)return;const c=l.getContext("2d");if(!c)return;let g=l.width,w=l.height;if(g===0||w===0){const p=window.innerWidth/100,C=window.innerHeight/100;g=Math.max(50,Math.min(75,8*p)),w=Math.max(60,Math.min(80,8*C)),l.width=g,l.height=w}if(c.clearRect(0,0,g,w),y.length===0)return;c.strokeStyle="rgba(255, 255, 255, 0.9)",c.lineWidth=2,c.beginPath();const h=g/y.length;let R=0;for(let p=0;p<y.length;p++){const C=y[p]/255,E=w-C*w;p===0?c.moveTo(R,E):c.lineTo(R,E),R+=h}c.stroke()},u=()=>{const l=U.current;if(!l)return;const c=l.getContext("2d");if(!c)return;let g=l.width,w=l.height;if(g===0||w===0){const C=window.innerWidth/100,E=window.innerHeight/100;g=Math.max(80,Math.min(120,12*C)),w=Math.max(70,Math.min(100,10*E)),l.width=g,l.height=w}if(c.clearRect(0,0,g,w),H.length===0)return;c.lineWidth=2,c.strokeStyle="rgba(255, 255, 255, 0.9)",c.beginPath();const h=g/H.length;let R=0;const p=w/2;for(let C=0;C<H.length;C++){const E=(H[C]-128)/128,D=p+E*p;C===0?c.moveTo(R,D):c.lineTo(R,D),R+=h}c.stroke()},d=()=>{const l=W.current;if(!l)return;const c=l.getContext("2d");if(!c)return;let g=l.width,w=l.height;if(g===0||w===0){const C=window.innerWidth/100,E=window.innerHeight/100;g=Math.max(80,Math.min(120,12*C)),w=Math.max(70,Math.min(100,10*E)),l.width=g,l.height=w}if(c.clearRect(0,0,g,w),y.length===0)return;const h=32,R=g/h,p=R*.1;for(let C=0;C<h;C++){const E=Math.floor(C/h*y.length),L=y[E]/255*w,$=c.createLinearGradient(0,w-L,0,w);$.addColorStop(0,"rgba(255, 255, 255, 1.0)"),$.addColorStop(1,"rgba(255, 255, 255, 0.6)"),c.fillStyle=$,c.fillRect(C*R+p,w-L,R-p*2,L)}},j=l=>{const c=l||performance.now();c-K.current>=J&&(r(),u(),d(),K.current=c),n=requestAnimationFrame(j)};return n=requestAnimationFrame(j),()=>{n&&cancelAnimationFrame(n)}},[y,H]);const M=i.useCallback(async()=>{if(!e.current)try{e.current=new(window.AudioContext||window.webkitAudioContext);const n=e.current.createAnalyser();n.fftSize=256,s.current=n,b(!0);let r=0;const u=16,d=j=>{if(s.current){if(j-r>=u){const l=new Uint8Array(n.frequencyBinCount),c=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(l),n.getByteTimeDomainData(c),F(l),G(c),r=j}requestAnimationFrame(d)}};requestAnimationFrame(d)}catch(n){console.error("Error initializing audio:",n)}},[]),B=i.useCallback(async(n,r,u=!1)=>{if((!e.current||!s.current)&&(await M(),await new Promise(k=>setTimeout(k,50))),!e.current||!s.current)return;const d=document.getElementById("contact-visualizer");if(!d)return;const j=n/d.offsetWidth,l=r/d.offsetHeight,c=l*l,g=220,w=Math.floor(c*36),h=g*Math.pow(2,w/12),R=Math.floor(j*8);let p=[];switch(R){case 0:p=[h,h*Math.pow(2,4/12),h*Math.pow(2,7/12)];break;case 1:p=[h,h*Math.pow(2,3/12),h*Math.pow(2,7/12)];break;case 2:p=[h,h*Math.pow(2,4/12),h*Math.pow(2,7/12),h*Math.pow(2,10/12)];break;case 3:p=[h,h*Math.pow(2,4/12),h*Math.pow(2,7/12),h*Math.pow(2,11/12)];break;case 4:p=[h,h*Math.pow(2,3/12),h*Math.pow(2,7/12),h*Math.pow(2,10/12)];break;case 5:p=[h,h*Math.pow(2,5/12),h*Math.pow(2,7/12)];break;case 6:p=[h,h*Math.pow(2,3/12),h*Math.pow(2,6/12)];break;case 7:p=[h,h*Math.pow(2,4/12),h*Math.pow(2,8/12)];break;default:p=[h]}const C=["sine","square","sawtooth","triangle"],E=C[Math.floor(j*C.length)],D=u?"active":`${n},${r}`;if(u&&o.current[D]){const{oscillators:k,gainNodes:z}=o.current[D];if(k.length!==p.length)k.forEach(S=>S.stop()),z.forEach(S=>S.disconnect());else{p.forEach((S,N)=>{k[N].frequency.setValueAtTime(S,e.current.currentTime);const ne=(N===0?.2:.13)*T;z[N].gain.setValueAtTime(ne,e.current.currentTime)}),k.forEach(S=>{S.type=E});return}}if(o.current[D]){const{oscillators:k,gainNodes:z}=o.current[D];k.forEach(S=>S.stop()),z.forEach(S=>S.disconnect())}const L=[],$=[];p.forEach((k,z)=>{const S=e.current.createOscillator(),N=e.current.createGain();S.type=E,S.frequency.setValueAtTime(k,e.current.currentTime);const ne=(z===0?.2:.13)*T;u?N.gain.setValueAtTime(ne,e.current.currentTime):(N.gain.setValueAtTime(ne,e.current.currentTime),N.gain.exponentialRampToValueAtTime(.01,e.current.currentTime+.8)),S.connect(N),N.connect(s.current),L.push(S),$.push(N)}),s.current._connected||(s.current.connect(e.current.destination),s.current._connected=!0),L.forEach(k=>k.start()),u||(L.forEach(k=>{k.stop(e.current.currentTime+.8)}),setTimeout(()=>{delete o.current[D]},800)),o.current[D]={oscillators:L,gainNodes:$,startTime:Date.now()}},[M,T]),q=i.useCallback(n=>{const u=n.currentTarget.getBoundingClientRect(),d=n.clientX-u.left,j=n.clientY-u.top;return{x:d,y:j}},[]),O=i.useCallback(n=>{V(!0);const r=q(n);v(r),B(r.x,r.y,!0)},[q,B]),se=i.useCallback(n=>{const r=q(n);v(r),x&&B(r.x,r.y,!0)},[q,x,B]),m=i.useCallback(()=>{if(V(!1),o.current.active&&e.current){const{oscillators:n,gainNodes:r}=o.current.active;n.forEach((u,d)=>{r[d].gain.exponentialRampToValueAtTime(.01,e.current.currentTime+.1),u.stop(e.current.currentTime+.1),r[d].disconnect()}),delete o.current.active}},[]);return i.useEffect(()=>{e.current&&Object.values(o.current).forEach(({oscillators:n,gainNodes:r})=>{n.forEach((u,d)=>{if(u&&r[d]){const l=(d===0?.2:.13)*T;r[d].gain.setValueAtTime(l,e.current.currentTime)}})})},[T]),i.useEffect(()=>{const n=()=>{const j=window.innerWidth/100,l=window.innerHeight/100;if(I.current){const c=I.current,g=Math.max(50,Math.min(75,8*j)),w=Math.max(60,Math.min(80,8*l));c.width=g,c.height=w}if(U.current){const c=U.current,g=Math.max(80,Math.min(120,12*j)),w=Math.max(70,Math.min(100,10*l));c.width=g,c.height=w}if(W.current){const c=W.current,g=Math.max(80,Math.min(120,12*j)),w=Math.max(70,Math.min(100,10*l));c.width=g,c.height=w}},r=setTimeout(n,100);n();let u;const d=()=>{clearTimeout(u),u=setTimeout(()=>{n()},16)};return window.addEventListener("resize",d),()=>{clearTimeout(r),clearTimeout(u),window.removeEventListener("resize",d)}},[]),a.jsxs("section",{id:"contact",className:"h-full flex flex-col relative overflow-hidden",style:{padding:"clamp(0.5rem, 1.5vw, 1rem)",paddingTop:"clamp(0.5rem, 1.5vh, 1rem)",paddingBottom:"clamp(0.5rem, 1.5vh, 1rem)",minWidth:0,maxWidth:"100%",minHeight:0},children:[a.jsxs("div",{id:"contact-visualizer",className:"flex-1 relative cursor-crosshair min-h-0 h-full w-full",onClick:M,onMouseDown:O,onMouseMove:se,onMouseUp:m,onMouseLeave:m,style:{width:"100%",height:"100%"},children:[a.jsxs(fe,{camera:{position:[0,0,3.5],fov:60},style:{width:"100%",height:"100%"},children:[a.jsx("ambientLight",{intensity:.5}),a.jsx("pointLight",{position:[3,3,3],intensity:1}),a.jsx("pointLight",{position:[-3,-3,-3],intensity:.5}),a.jsx("directionalLight",{position:[0,5,0],intensity:.3}),a.jsx(Oe,{frequencies:y})]}),a.jsx("canvas",{ref:I,className:"absolute pointer-events-none z-10",style:{top:"clamp(4px, 1vh, 8px)",left:"clamp(4px, 1vw, 8px)",width:"clamp(50px, 8vw, 75px)",height:"clamp(60px, 8vh, 80px)"}}),a.jsx("canvas",{ref:U,className:"absolute pointer-events-none z-10",style:{top:"clamp(4px, 1vh, 8px)",right:"clamp(4px, 1vw, 8px)",width:"clamp(80px, 12vw, 120px)",height:"clamp(70px, 10vh, 100px)"}}),a.jsx("canvas",{ref:W,className:"absolute pointer-events-none z-10",style:{bottom:"clamp(4px, 1vh, 8px)",right:"clamp(4px, 1vw, 8px)",width:"clamp(80px, 12vw, 120px)",height:"clamp(70px, 10vh, 100px)"}}),A&&a.jsx("div",{className:"absolute pointer-events-none z-20",style:{left:`${A.x}px`,top:`${A.y}px`,transform:"translate(-50%, -50%)",width:x?"16px":"12px",height:x?"16px":"12px",borderRadius:"50%",backgroundColor:"rgba(51, 77, 255, 0.8)",boxShadow:"0 0 10px rgba(51, 77, 255, 0.8)",transition:"width 0.1s, height 0.1s"}}),a.jsx("div",{className:"absolute z-10 pointer-events-none",style:{bottom:"clamp(0.25rem, 1vh, 0.5rem)",left:"clamp(0.25rem, 1vw, 0.5rem)"},children:a.jsx("p",{className:"text-white font-light",style:{fontSize:"clamp(0.5rem, 1.25vw, 0.75rem)",marginBottom:"clamp(0.125rem, 0.5vh, 0.25rem)",lineHeight:"1.2"},children:"click & drag to play"})})]}),a.jsx("div",{className:"absolute z-30 pointer-events-auto",style:{bottom:"clamp(0.75rem, 2vh, 1.5rem)",left:"clamp(0.75rem, 2vw, 1.5rem)"},children:a.jsx(Ae,{defaultValue:50,startingValue:0,maxValue:100,isStepped:!1,stepSize:1,onChange:n=>P(n/100),className:"volume-slider"})}),a.jsx("div",{className:"absolute z-30 pointer-events-auto",style:{bottom:"clamp(0.75rem, 2vh, 1.5rem)",right:"clamp(0.75rem, 2vw, 1.5rem)"},children:a.jsx(Pe,{audioContext:e.current,volume:T})})]})}function Le(){const t=i.useRef(null);return i.useEffect(()=>(document.body.classList.add("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[]),a.jsxs("div",{className:"relative z-10 pointer-events-none h-screen overflow-hidden",ref:t,children:[a.jsx("div",{className:"pointer-events-auto",children:a.jsx(ge,{})}),a.jsxs("div",{className:"pointer-events-auto h-full relative flex flex-col",style:{paddingTop:"clamp(2rem, 4vh, 4rem)"},children:[a.jsx("div",{className:"flex-1 overflow-hidden",style:{paddingLeft:"clamp(1rem, 2.5vw, 1.75rem)",paddingRight:"clamp(1rem, 2.5vw, 1.75rem)",paddingTop:"clamp(0.75rem, 2vh, 1.25rem)",paddingBottom:"clamp(0.75rem, 2vh, 1.25rem)",minWidth:0,minHeight:0},children:a.jsx("div",{className:"h-full border border-white/30 overflow-hidden",children:a.jsx(Ve,{containerRef:t})})}),a.jsx(we,{})]}),a.jsx(ve,{})]})}export{Le as default};
